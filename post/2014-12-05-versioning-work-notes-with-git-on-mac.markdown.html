<html lang="en"><head><meta charset="UTF-8" /><meta content="width=device-width, initial-scale=1" name="viewport" /><link href="/css/reset.css" rel="stylesheet" /><link href="/css/highlightjs/github.css" rel="stylesheet" /><script src="/js/highlight.pack.js" type="text/javascript"></script><link href="/css/styles.css" rel="stylesheet" /><link href="/css/tablets.css" rel="stylesheet" /><link href="/css/blog-post.css" rel="stylesheet" /><style>@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,400i|Quattrocento&display=swap');</style><style>@import url('https://fonts.googleapis.com/css?family=Open+Sans:300&display=swap');</style><title>Versioning work notes with git on mac - Mein(un)sin</title></head><body class="body"><div id="page"><header class="website-header"><h1 class="website-title"><a href="/">Mein(un)sin</a></h1><span class="website-subtitle">my (non) sense</span></header><div class="left-sidebar"><h2>All posts</h2><div id="page-index"><ul><li><a href="/post/2021-06-26-command-line-tool-renaissance.markdown.html">Command line tool renaissance</a><span class="article-date">2021-06-26</span></li><li><a href="/post/2021-06-26-taking-notes-with-neovim.markdown.html">Taking notes with neovim</a><span class="article-date">2021-06-26</span></li><li><a href="/post/2021-03-17-clojure:-making-a-case-for-case.markdown.html">Clojure: making a case for case</a><span class="article-date">2021-03-17</span></li><li><a href="/post/2020-11-23-dev-setup-2020.markdown.html">Dev setup 2020</a><span class="article-date">2020-11-23</span></li><li><a href="/post/2020-11-16-writting-clojure-cli-tools-with-joker.markdown.html">Writing Clojure cli tools with joker</a><span class="article-date">2020-11-16</span></li><li><a href="/post/2019-03-26-github-pull-request-template-example.md.html">A github pull request template example</a><span class="article-date">2019-03-26</span></li><li><a href="/post/2014-12-05-versioning-work-notes-with-git-on-mac.markdown.html">Versioning work notes with git on mac</a><span class="article-date">2014-12-5</span></li><li><a href="/post/2014-12-21-deploying-clojure-apps-on-giant-swarm-docker.markdown.html">Deploying clojure apps on giant swarm (docker)</a><span class="article-date">2014-12-21</span></li><li><a href="/post/2014-01-26-moving-to-london-banks-and-money.markdown.html">Moving to London: Banks and Money</a><span class="article-date">2014-1-26</span></li><li><a href="/post/2014-05-17-developers-love-bacon-conference.markdown.html">Developers Love Bacon - conference</a><span class="article-date">2014-05-17</span></li><li><a href="/post/2013-07-04-clojure-lesson-learned.markdown.html">Clojure lesson learned</a><span class="article-date">2013-9-27</span></li><li><a href="/post/2013-07-13-clojure-ggetting-started.markdown.html">Clojure getting started: setting up</a><span class="article-date">2013-7-17</span></li><li><a href="/post/2013-04-29-moving-the-counter-into-the-foreach-loop.markdown.html">Moving the counter into the foreach loop</a><span class="article-date">2013-4-29</span></li><li><a href="/post/2013-04-29-hello-world.markdown.html">Hello world, again</a><span class="article-date">2013-4-29</span></li></ul></div></div><div id="blog-post"><article><div><header><h1>Versioning work notes with git on mac</h1><p><time class="article-date" date="2014-12-5">2014-12-05</time> </p></header><p>I started to keep a loose log of todo's and related useful information at work. This log is a simple text, file which I use in a append-only fashion. New information gets added at the top, using markdown notation.</p><p>Our company provides we with a Google Account, so I put my notes into Google Drive to back it up. You can choose Dropbox or a private git repository for hat matter.</p><p>But having just a plain file, makes it hard to keep track of when an entry was made. So I started to use git to take care of the versioning for me. I still keep my files in Google Drive and do not push the git repository,  because I'm only interested in the versioning, and not in collaboration of backup.</p><p>However I would like for commits to happen on a regular basis instead of me having to remember to also make a commit after changing a file.</p><p>Since the usage of cron is discouraged on mac I looked into using apples  <code>launchctr deamon</code>.</p><p>Launch Control works by loading job descriptions from <code>.plist</code> files, which are noting more than xml files, which are easy enough to write my hand.</p><p>You will find your Launch Control files in <code>~/Library/LaunchAgents</code>.</p><p>Here is the plist file I use for my notes <code>velrok.gittify-notes.plist</code>:</p><pre><code class="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;velrok.gittify-notes.plist&lt;/string&gt;

    &lt;key&gt;WorkingDirectory&lt;/key&gt;
    &lt;string&gt;/Users/velok/Google Drive/notes&lt;/string&gt;

    &lt;key&gt;WatchPaths&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;/Users/velok/Google Drive/notes&lt;/string&gt;
    &lt;/array&gt;

    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;git&lt;/string&gt;
        &lt;string&gt;commit&lt;/string&gt;
        &lt;string&gt;-a&lt;/string&gt;
        &lt;string&gt;-m&lt;/string&gt;
        &lt;string&gt;"snapshot"&lt;/string&gt;
    &lt;/array&gt;

    &lt;key&gt;ProcessType&lt;/key&gt;
    &lt;string&gt;Background&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre><p><code>WorkingDirectory</code> sets the working directory for all the program calls, which makes it very convenient to write out the necessary git calls.</p><p><code>WatchPaths</code> defines an array of path to watch for changes, which is a perfect fit for my notes versioning problem, because it facilitates the triggering of commits every time I save, but not during the long hours I might not change  anything at all.</p><p><code>ProgramArguments</code> is essentially the command line call separated in its components. I'm simply adding all the changed files and create a commit with a fixed message.</p><p>You will obviously have to have your notes directory initialized as a  git repository <code>git init</code>.</p><p>If it also contains files that you do not wish to have included I would recommend adding them to a <code>.gitignore</code> file.</p><p>To actually register this job and have Launch Control run it you have to load your file <code>launchctl load velrok.gittify-notes.plist</code>. To stop execution of your script you need to unload it  <code>launchctl unload velrok.gittify-notes.plist</code>.</p><p>Now you should have your git versioned directory of plain text notes running and the launchctrl daemon trigger new commits every time you save your notes file. There is a slight delay of a couple of seconds between the save and the actual commit. Just run "git log" in your notes directory to see a log of commits. A call to <code>git blame notes.md</code> will show you the file contents with time stamps next to each line, so you know, when they changed last.</p></div></article></div><script type="text/javascript">hljs.initHighlightingOnLoad();</script><footer class="page-footer"><nav><ul><li></li><li><a href="/" id="footer_nav_index">&#8613; index</a></li><li></li></ul></nav></footer></div></body></html>