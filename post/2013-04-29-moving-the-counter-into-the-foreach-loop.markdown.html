<html lang="en"><head><meta charset="UTF-8" /><meta content="width=device-width, initial-scale=1" name="viewport" /><link href="/css/reset.css" rel="stylesheet" /><link href="/css/highlightjs/github.css" rel="stylesheet" /><script src="/js/highlight.pack.js" type="text/javascript"></script><link href="/css/styles.css" rel="stylesheet" /><link href="/css/tablets.css" rel="stylesheet" /><link href="/css/blog-post.css" rel="stylesheet" /><style>@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,400i|Quattrocento&display=swap');</style><style>@import url('https://fonts.googleapis.com/css?family=Open+Sans:300&display=swap');</style><title>Moving the counter into the foreach loop - Mein(un)sin</title></head><body class="body"><div id="page"><header class="website-header"><h1 class="website-title"><a href="/">Mein(un)sin</a></h1><span class="website-subtitle">my (non) sense</span></header><div class="left-sidebar"><h2>All posts</h2><div id="page-index"><ul><li><a href="/post/2021-10-10-the-roma-d&amp;d-setting.markdown.html">The Roma D&D Setting</a><span class="article-date">2021-10-10</span></li><li><a href="/post/2021-06-26-taking-notes-with-neovim.markdown.html">Taking notes with neovim</a><span class="article-date">2021-06-28</span></li><li><a href="/post/2021-06-26-command-line-tool-renaissance.markdown.html">Command line tool renaissance</a><span class="article-date">2021-06-26</span></li><li><a href="/post/2021-03-17-clojure:-making-a-case-for-case.markdown.html">Clojure: making a case for case</a><span class="article-date">2021-03-17</span></li><li><a href="/post/2020-11-23-dev-setup-2020.markdown.html">Dev setup 2020</a><span class="article-date">2020-11-23</span></li><li><a href="/post/2020-11-16-writting-clojure-cli-tools-with-joker.markdown.html">Writing Clojure cli tools with joker</a><span class="article-date">2020-11-16</span></li><li><a href="/post/2019-03-26-github-pull-request-template-example.md.html">A github pull request template example</a><span class="article-date">2019-03-26</span></li><li><a href="/post/2014-12-05-versioning-work-notes-with-git-on-mac.markdown.html">Versioning work notes with git on mac</a><span class="article-date">2014-12-5</span></li><li><a href="/post/2014-12-21-deploying-clojure-apps-on-giant-swarm-docker.markdown.html">Deploying clojure apps on giant swarm (docker)</a><span class="article-date">2014-12-21</span></li><li><a href="/post/2014-01-26-moving-to-london-banks-and-money.markdown.html">Moving to London: Banks and Money</a><span class="article-date">2014-1-26</span></li><li><a href="/post/2014-05-17-developers-love-bacon-conference.markdown.html">Developers Love Bacon - conference</a><span class="article-date">2014-05-17</span></li><li><a href="/post/2013-07-04-clojure-lesson-learned.markdown.html">Clojure lesson learned</a><span class="article-date">2013-9-27</span></li><li><a href="/post/2013-07-13-clojure-ggetting-started.markdown.html">Clojure getting started: setting up</a><span class="article-date">2013-7-17</span></li><li><a href="/post/2013-04-29-moving-the-counter-into-the-foreach-loop.markdown.html">Moving the counter into the foreach loop</a><span class="article-date">2013-4-29</span></li><li><a href="/post/2013-04-29-hello-world.markdown.html">Hello world, again</a><span class="article-date">2013-4-29</span></li></ul></div></div><div id="blog-post"><article><div><header><h1>Moving the counter into the foreach loop</h1><p><time class="article-date" date="2013-4-29">2013-04-29</time> </p></header><p>Recently reviewed some python for a friend of mine. He needed a counter while iterating items of a list.</p><pre><code class="python">
stuff = ["some thing", "some thing else"]

i = 0
for thing in stuff:
  print "processing item {} of {}".format(i + 1, len(stuff))
  i += 1

</code></pre><p>Having an extra counter var always annoyed me.</p><p>Python comes with this nice <code>for i in list</code> syntax, so taking care of a counter separately seamed wrong or at least not elegant.</p><h2>update</h2><aside class="link-aside"><div class="link-aside--title">Rafa Rodríguez</div><div class="link-aside--url"><a class="link-aside--url--link" href="https://plus.google.com/108719046880594833475/posts" target="_blank">https://plus.google.com/108719046880594833475/posts</a></div></aside><p>Big thanks to <a href="https://plus.google.com/108719046880594833475/posts">Rafa Rodríguez</a> for pointing me to <code>enumerate</code></p><pre><code class="python">stuff = ["some thing", "some thing else"]

for i, thing in enumerate(stuff):
  print "processing item {} of {}".format(i + 1, len(stuff))

</code></pre><p><em>You can skipp the rest :) .</em></p><h2><!--– more –--></h2><p>Indeed I came up with the following refactoring:</p><pre><code class="python">
stuff = ["some thing", "some thing else"]

for thing, i in zip(stuff, range(len(stuff))):
  print "processing item {} of {}".format(i + 1, len(stuff))

</code></pre><p><code>zip</code> takes n lists and combines those elements into tuples, drawing from all lists, stopping if one of the lists is exhausted. This makes it very useful in combination with infinite lists.</p><aside class="link-aside"><div class="link-aside--title">itertools</div><div class="link-aside--url"><a class="link-aside--url--link" href="http://docs.python.org/2/library/itertools.html" target="_blank">http://docs.python.org/2/library/itertools.html</a></div></aside><p>This takes care of incrementing <code>i</code> for us :). However it's still cumbersome to have to specify the range. What we really want is a lazy sequence of integers that just counts up starting at a specified value. Python <a href="http://docs.python.org/2/library/itertools.html">itertools</a> to the rescue. The iter tools provide a <code>count()</code> function that returns this generator:</p><pre><code class="python">def count(start=0, step=1):
    # count(10) --&gt; 10 11 12 13 14 ...
    # count(2.5, 0.5) -&gt; 2.5 3.0 3.5 ...
    n = start
    while True:
        yield n
        n += step
</code></pre><p>So we can rewrite our code to:</p><pre><code class="python">from itertools import count

stuff = ["some thing", "some thing else"]

for thing, i in zip(stuff, count(1))):
  print "processing item {} of {}".format(i, len(stuff))
</code></pre><p>Note that by calling <code>count(1)</code> the sequence starts at 1, removing the need to call <code>i + 1</code> in the print statement all together.</p><p>In the end I was very pleased to finally having found - what I belief to be - a beautiful solution to this problem in python.</p><p>Feel free to comment or contact me on twitter.</p></div></article></div><script type="text/javascript">hljs.initHighlightingOnLoad();</script><footer class="page-footer"><nav><ul><li></li><li><a href="/" id="footer_nav_index">&#8613; index</a></li><li></li></ul></nav></footer><div class="comments"><script async="async" crossorigin="anonymous" issue-term="pathname" label="utterance-comment" repo="https://github.com/Velrok/velrok.github.io" src="https://utteranc.es/client.js" theme="github-light"></script></div></div></body></html>