
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Clojure Getting Started: Setting Up - Mein(un)sinn</title>
  <meta name="author" content="velrok">

  
  <meta name="description" content="Setting Up a Project Clojure runs on the JVM so you need a recent
JDK
version installed
(Java 6 or newer should do). To create a new Clojure project &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://Velrok.github.io/blog/2013/07/17/clojure-ggetting-started">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Mein(un)sinn" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42444085-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Mein(un)sinn</a></h1>
  
    <h2> </h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:Velrok.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>

  <a href="https://github.com/velrok"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>

  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Clojure Getting Started: Setting Up</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-17T10:54:00+01:00" pubdate data-updated="true">Jul 17<span>th</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Setting Up a Project</h2>

<p>Clojure runs on the JVM so you need a recent
<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK</a>
version installed
(Java 6 or newer should do).</p>

<p>To create a new Clojure project we use <a href="https://github.com/technomancy/leiningen">Leiningen</a>.
On Mac OS it&#8217;s just a</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew install leiningen</span></code></pre></td></tr></table></div></figure>


<p>away.</p>

<p>This will install Leiningen 2.
Version 2 breaks compatibility with the old plugin system, but most projects
that supply Leiningen have a description how to add them to your project.clj
for each version.
However if you start a new project, always go with Leiningen 2.</p>

<p>To create our getting started project (we will name it greenfield-clojure) run:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>lein new greenfield-clojure</span></code></pre></td></tr></table></div></figure>


<p>This will create a new folder. For the rest of this writing all file paths will
be relative to this folder.</p>

<p>You should see a <code>project.clj</code> file looking something like this</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defproject </span><span class="nv">greenfield-clojure</span> <span class="s">&quot;0.1.0-SNAPSHOT&quot;</span>
</span><span class='line'>  <span class="ss">:description</span> <span class="s">&quot;FIXME: write description&quot;</span>
</span><span class='line'>  <span class="ss">:url</span> <span class="s">&quot;http://example.com/FIXME&quot;</span>
</span><span class='line'>  <span class="ss">:license</span> <span class="p">{</span><span class="ss">:name</span> <span class="s">&quot;Eclipse Public License&quot;</span>
</span><span class='line'>            <span class="ss">:url</span> <span class="s">&quot;http://www.eclipse.org/legal/epl-v10.html&quot;</span><span class="p">}</span>
</span><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.5.1&quot;</span><span class="p">]])</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see Clojure itself is defined as a dependency.
As of this writing the latest version is 1.5.1 .</p>

<p>Now run</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>lein deps
</span></code></pre></td></tr></table></div></figure>


<p>which will download and install all specified dependencies.</p>

<p>During this project we will add additional dependencies to this project.
<a href="https://clojars.org/clj-http">CloJars</a> is a repository for Clojure libaries.
There you can find a lot of interesting stuff.
You can also include Java dependencies from <a href="http://search.maven.org/">Maven Central</a>.
Please consult the Leiningen <a href="https://github.com/technomancy/leiningen/blob/stable/sample.project.clj">sample.project.clj</a>
for further information.</p>

<!-- more -->


<h2>The REPL</h2>

<p>The REPL is a interactive environment where you can run Clojure code, in the
context of your project.</p>

<p>To start a REPL run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>lein repl
</span></code></pre></td></tr></table></div></figure>


<p>This will also download and install all dependencies that are given in the
project.clj.</p>

<p>Now we can start and enter a simple <strong>hello world</strong> into the repl:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="nb">println </span><span class="s">&quot;Hello world!&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Setting Up Your Editor</h2>

<h3>Sublime Text 2</h3>

<p>I started out, using Sublime Text 2.
It&#8217;s a good start. I can recommend installing <a href="https://github.com/wuub/SublimeREPL">SublimeREPL</a>.
Clojure development uses the REPL extensively, so your editor should
come with some kind of REPL integration.</p>

<p>I found SublimeREPL to be less stable as I would have liked.
So I switched to vim.</p>

<p>One of the best editors for Clojure is Emacs, but I just can&#8217;t get
used to it :). All Emacs folks out there: please leave plugin recommendations
in the comments, I will integrate them.</p>

<h3>vim</h3>

<p>As mentioned above I switched from Sublime to vim, because of its better REPL
integration
via the <a href="https://github.com/tpope/vim-fireplace">fireplace.vim</a> plugin,
proved to be more stable.</p>

<p>Once your setup is complete you will be able to send the complete file or
single calls - under the cursor - to the REPL.
Make sure this works. We will use it in the future of this tutorial.
You can of course just continuously copy and paste the snippets to the REPL by
hand. However that is very tedious and time consuming.</p>

<p>You want to use the REPL, because restating the JVM, just to execute one file,
takes seconds, which makes for a very frustrating feedback cycle.</p>

<p>While you are at it you might also want to install
<a href="https://github.com/kien/rainbow_parentheses.vim">rainbow_parentheses.vim</a>.
It will highlight matching parenthesis in the same color, while giving each pair
an individual color.</p>

<h2>Structuring Code</h2>

<h3>Files and Namespaces</h3>

<p>If you followed the tutorial and have created the <em>greenfeld_project</em> you will
find a file called <code>src/greenfeld_project/core.clj</code>.
This is the default starting point.</p>

<p>The first line of the file should look like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">greenfield-clojure.core</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>ns</code> creates the new <em>namespace</em> <code>greenfeld-clojure</code>.
Namespaces in Clojure have to respond to the file structure.</p>

<p>Given a namespace <code>greenfield-clojure.domain.user</code> it will look for a file in
<code>src/greenfeld_clojure/domain/user.clj</code>.
Notice that it uses <code>_</code> for file names and <code>-</code> for the namespaces.</p>

<p>Lets create a new clj file:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="nv">touch</span> <span class="nv">src/greenfield_clojure/util.clj</span>
</span></code></pre></td></tr></table></div></figure>


<p>Following the naming schema we start a fitting namespace for that file by
adding:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">greenfield-clojure.util</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>All the following definitions will go into that namespace.</p>

<p>Now lets add a simple greeting function:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">greenfield-clojure.util</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">greet</span> <span class="p">[</span><span class="nv">name</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">str </span><span class="s">&quot;Welcome, &quot;</span> <span class="nb">name </span><span class="s">&quot;!&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the same namespace you can make a test call: <code>(greet "Jane")</code>.</p>

<p>If you have your REPL going just put the code below the function definition
itself and send it to the REPL for evaluation.
You can remove the code afterwards.</p>

<p>This way you can quickly sketch together some code and move and refactor later.</p>

<p>If you use the REPL via command line you can switch to this namespae (or any other valid
namespace) by calling:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">greenfield-clojure.util</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Using Code from other Namespaces</h3>

<p>We don&#8217;t just want to create namespaces, we want to use stuff that is
located in other namespaces. We can do so by useing <code>use</code> and <code>require</code>.</p>

<h4>use</h4>

<p><code>use</code> will include all the vars (function definitions are just vars that point
to functions) into the current namespace.
This will NOT pull vars the used namespace itself includes via <code>use</code>.
None the less: this pollutes you namespace and it gets harder to avoid clashes
and find where functions are defined.
However if you want to use clojure core namespaces - for example - it sometimes
makes for nicer code.</p>

<p>Here we include <code>clojure.set</code> operations with the <code>use</code> function:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="nf">use</span> <span class="ss">&#39;clojure.set</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nb">intersection </span><span class="o">#</span><span class="p">{</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">}</span> <span class="o">#</span><span class="p">{</span><span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>Notice that we need to quote the namespace, using a <code>'</code>.</p>

<p>This is useful when working in the REPL itself, but when you write files it&#8217;s
better to include this in the <code>ns</code> call directly useing <code>require</code> instead.</p>

<h4>require</h4>

<p>We have seen that <code>use</code>, while nice in some cases, pollutes our namespace.</p>

<p>Instead we use <code>require</code>. Let us require our util namespace from the core
namespace:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">greenfield-clojure.core</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nf">require</span> <span class="o">&#39;</span><span class="p">(</span><span class="nf">greenfield-clojure</span> <span class="p">[</span><span class="nv">util</span> <span class="ss">:as</span> <span class="nv">util</span><span class="p">]))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now this is very cumbersome. Instead we can include everything we want to
require directly in the <code>ns</code> call:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">greenfield-clojure.core</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">greenfield-clojure.util</span> <span class="ss">:as</span> <span class="nv">util</span><span class="p">]))</span>
</span></code></pre></td></tr></table></div></figure>


<p>With our utils library required, we can call its functions like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="nf">util/greet</span> <span class="s">&quot;Xavier&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>In clojure the <code>/</code> is used to reference vars from a different namespace.</p>

<p><strong>Update:</strong>
Thanks to Pierre Mariani for pointing out that if you want to include
every var from another namespace into the current namespace like <code>use</code> would
you can and should use the following variant of require:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">greenfield-clojure.core</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clojure.set</span> <span class="ss">:refer</span> <span class="p">[</span><span class="nv">intersection</span><span class="p">]]))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nb">intersection </span><span class="o">#</span><span class="p">{</span><span class="mi">1</span> <span class="mi">2</span><span class="p">}</span> <span class="o">#</span><span class="p">{</span><span class="mi">2</span> <span class="mi">3</span><span class="p">})</span>
</span><span class='line'><span class="c1">; =&gt; #{2}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or if you want to refer everything from the namespace replace
<code>[intersection]</code> with <code>:all</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">greenfield-clojure.core</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clojure.set</span> <span class="ss">:refer</span> <span class="ss">:all</span><span class="p">]))</span>
</span></code></pre></td></tr></table></div></figure>


<p>I admit the hole requiring other namespaces is confusing. But I can also
promise you that all the other stuff is much more thought thou and has more
of a theme to it.
Now if you are interested or still confused
<a href="http://blog.8thlight.com/colin-jones/2010/12/05/clojure-libs-and-namespaces-require-use-import-and-ns.html">Colin Jones explains requiring code</a>
in more detail.</p>

<h2>Executing from the Command Line</h2>

<p>Util now we only executed our code using a REPL, but at some point in time
we will want to start our program from the command line.</p>

<p>There are two ways to do this:</p>

<ol>
<li>use leiningen</li>
<li>package everything up into one big jar file</li>
</ol>


<p>In any case our main namespace must contain a <code>-main</code> function that takes
a variable number of arguments:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">-main</span><span class="p">[</span><span class="o">&amp;</span> <span class="nv">args</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">println </span><span class="p">(</span><span class="nf">util/greet</span> <span class="s">&quot;Xavier&quot;</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will just always print the same greeting.</p>

<h3>Running with Leiningen</h3>

<p>Using leiningen we can call:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="nv">lein</span> <span class="nv">run</span> <span class="nv">-m</span> <span class="nv">greenfield-clojure.core</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>-m</code> tells Leiningen which namespace to use for execution.
The namespace must include a <code>-main</code> function.
<em>Notice the <code>-</code> before the main</em>.</p>

<p>We can also specify the main namespace in our <code>project.clj</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defproject </span><span class="nv">greenfield-clojure</span> <span class="s">&quot;0.1.0-SNAPSHOT&quot;</span>
</span><span class='line'>  <span class="ss">:description</span> <span class="s">&quot;FIXME: write description&quot;</span>
</span><span class='line'>  <span class="ss">:url</span> <span class="s">&quot;http://example.com/FIXME&quot;</span>
</span><span class='line'>  <span class="ss">:license</span> <span class="p">{</span><span class="ss">:name</span> <span class="s">&quot;Eclipse Public License&quot;</span>
</span><span class='line'>            <span class="ss">:url</span> <span class="s">&quot;http://www.eclipse.org/legal/epl-v10.html&quot;</span><span class="p">}</span>
</span><span class='line'>  <span class="ss">:main</span> <span class="nv">greenfield-clojure.core</span>
</span><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.4.0&quot;</span><span class="p">]])</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we can omit the <code>-m ...</code> part:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="nv">lein</span> <span class="nv">run</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Creating an Uberjar</h3>

<p>We can use Leiningen to package everything up into one big jar that can be
executed very simply.</p>

<p>For that we have to set the main namespace (same thing we did above):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defproject </span><span class="nv">greenfield-clojure</span> <span class="s">&quot;0.1.0-SNAPSHOT&quot;</span>
</span><span class='line'>  <span class="ss">:description</span> <span class="s">&quot;FIXME: write description&quot;</span>
</span><span class='line'>  <span class="ss">:url</span> <span class="s">&quot;http://example.com/FIXME&quot;</span>
</span><span class='line'>  <span class="ss">:license</span> <span class="p">{</span><span class="ss">:name</span> <span class="s">&quot;Eclipse Public License&quot;</span>
</span><span class='line'>            <span class="ss">:url</span> <span class="s">&quot;http://www.eclipse.org/legal/epl-v10.html&quot;</span><span class="p">}</span>
</span><span class='line'>  <span class="ss">:main</span> <span class="nv">greenfield-clojure.core</span>
</span><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.4.0&quot;</span><span class="p">]])</span>
</span></code></pre></td></tr></table></div></figure>


<p>But because this will be called directly, we have to tell clojure that it should
compile the clojure code into a java class when creating the jar.
To do this add a <code>(:gen-class)</code> argument to the <code>ns</code> call:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">greenfield-clojure.core</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">greenfield-clojure.util</span> <span class="ss">:as</span> <span class="nv">util</span><span class="p">])</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:gen-class</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is call AOT (Ahead of Time Compilation).
It&#8217;s sufficient to do this for the main namespace only.
You should be careful with this. In case implementations of core clojure
functionality change your ATO compiled code might not be compatible without a
renewed compilation.</p>

<p>A call to</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="nv">lein</span> <span class="nv">uberjar</span>
</span></code></pre></td></tr></table></div></figure>


<p>will create a standalone jar in the <code>target</code> folder.</p>

<p>Run it via</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="nv">java</span> <span class="nv">-jar</span> <span class="nv">target/greenfield-clojure-0.1.0-SNAPSHOT-standalone.jar</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Summary</h2>

<p>We have done it!</p>

<p>In this tutorial we:</p>

<ol>
<li>setup and installed clojure from scratch</li>
<li>fired up a REPL for interactive development</li>
<li>configured our favorite editor (if it is Sublime or vim ;) )</li>
<li>learned how the file structure matches up to namespaces</li>
<li>how to create our own namespace</li>
<li>how to include code from other namespaces</li>
<li>we used leiningen to run our code from the command line</li>
<li>bundled everything up in one nice care-free jar that can be pushed around the computing world</li>
</ol>


<p>I hope this tutorial was helpful or interesting.</p>

<p>Any feedback is much appreciated.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">velrok</span></span>

      








  


<time datetime="2013-07-17T10:54:00+01:00" pubdate data-updated="true">Jul 17<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/clojure/'>clojure</a>, <a class='category' href='/blog/categories/programming/'>programming</a>, <a class='category' href='/blog/categories/tutorial/'>tutorial</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://Velrok.github.io/blog/2013/07/17/clojure-ggetting-started/" data-via="velrok" data-counturl="http://Velrok.github.io/blog/2013/07/17/clojure-ggetting-started/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/04/29/moving-the-counter-into-the-foreach-loop/" title="Previous Post: moving the counter into the foreach loop">&laquo; moving the counter into the foreach loop</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/09/27/clojure-lesson-learned/" title="Next Post: Clojure Lesson Learned">Clojure Lesson Learned &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>


</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/12/21/deploying-clojure-apps-on-giant-swarm-docker/">deploying clojure apps on giant swarm (docker)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/05/versioning-work-notes-with-git-on-mac/">Versioning work notes with git on Mac</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/17/developers-love-bacon-conference/">Developers Love Bacon - Conference</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/26/moving-to-london-banks-and-money/">Moving to London: Banks and Money</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/09/27/clojure-lesson-learned/">Clojure Lesson Learned</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/velrok">@velrok</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'velrok',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/115269108641501123493?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - velrok -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'meinsinn';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://Velrok.github.io/blog/2013/07/17/clojure-ggetting-started/';
        var disqus_url = 'http://Velrok.github.io/blog/2013/07/17/clojure-ggetting-started/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
